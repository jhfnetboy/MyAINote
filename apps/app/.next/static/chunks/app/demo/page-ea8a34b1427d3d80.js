(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{2791:(e,s,r)=>{"use strict";r.d(s,{lA:()=>t,yw:()=>a}),"function"==typeof SuppressedError&&SuppressedError;function a(e,s=!1){return window.__TAURI_INTERNALS__.transformCallback(e,s)}async function t(e,s={},r){return window.__TAURI_INTERNALS__.invoke(e,s,r)}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap},3158:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var a,t=r(2071),l=r(9328),n=r(2791);async function d(e,s){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,s),await (0,n.lA)("plugin:event|unlisten",{event:e,eventId:s})}async function i(e,s,r){var a;let t="string"==typeof(null==r?void 0:r.target)?{kind:"AnyLabel",label:r.target}:null!=(a=null==r?void 0:r.target)?a:{kind:"Any"};return(0,n.lA)("plugin:event|listen",{event:e,target:t,handler:(0,n.yw)(s)}).then(s=>async()=>d(e,s))}async function c(e,s,r){return i(e,r=>{d(e,r.id),s(r)},r)}!function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"}(a||(a={}));var o=r(4495);function u(){let[e,s]=(0,o.useState)(null),[r,a]=(0,o.useState)(0),[d,u]=(0,o.useState)(0),[x,h]=(0,o.useState)("add"),[m,b]=(0,o.useState)(null),[g,p]=(0,o.useState)(null),[j,N]=(0,o.useState)([]),[v,y]=(0,o.useState)(!1),[_,f]=(0,o.useState)(null),[k,w]=(0,o.useState)(!1),E=(0,o.useCallback)(()=>{(0,n.lA)("greet").then(e=>{s(e)}).catch(e=>{console.error(e)})},[]),A=(0,o.useCallback)(()=>{p(null),(0,n.lA)("calculate",{a:r,b:d,operation:x}).then(e=>{b(e)}).catch(e=>{"string"==typeof e?p(e):p("An unknown error occurred"),console.error(e)})},[r,d,x]),C=(0,o.useCallback)(()=>{N([]),y(!0),(0,n.lA)("start_process_monitoring").catch(e=>{console.error("Failed to start monitoring:",e),y(!1)})},[]),D=(0,o.useCallback)(()=>{w(!0),(0,n.lA)("get_hardware_info").then(e=>{f(e)}).catch(e=>{console.error("Failed to get hardware info:",e)}).finally(()=>{w(!1)})},[]);return(0,o.useEffect)(()=>{N([]);let e=i("process-status",e=>{N(s=>{let r=[...s,e.payload];return r.length>5?r.slice(r.length-5):r})});return c("window-process-status",()=>{console.log("Received window-specific event")}),()=>{e.then(e=>e())}},[]),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Tauri 前后端通信演示"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"1. 简单命令调用"}),(0,t.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"调用Rust函数返回一个简单字符串，无需传递参数。"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(l.G,{onClick:E,title:"调用 greet",disabled:!1})}),e&&(0,t.jsxs)("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"返回结果:"})}),(0,t.jsx)("p",{className:"font-mono text-sm",children:e})]})]}),(0,t.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"2. 参数化命令调用"}),(0,t.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"传递参数给Rust函数并接收结构化返回数据。"}),(0,t.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1",children:"第一个数:"}),(0,t.jsx)("input",{type:"number",value:r,onChange:e=>a(parseInt(e.target.value||"0",10)),className:"border rounded p-2 w-full dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1",children:"第二个数:"}),(0,t.jsx)("input",{type:"number",value:d,onChange:e=>u(parseInt(e.target.value||"0",10)),className:"border rounded p-2 w-full dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1",children:"操作:"}),(0,t.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"border rounded p-2 w-full dark:bg-gray-800",children:[(0,t.jsx)("option",{value:"add",children:"加法 (+)"}),(0,t.jsx)("option",{value:"subtract",children:"减法 (-)"}),(0,t.jsx)("option",{value:"multiply",children:"乘法 (*)"}),(0,t.jsx)("option",{value:"divide",children:"除法 (/)"})]})]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(l.G,{onClick:A,title:"计算",disabled:!1})}),g&&(0,t.jsx)("div",{className:"p-3 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded mb-3",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"错误:"})," ",g]})}),m&&(0,t.jsxs)("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"结果:"})," ",m.result]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"描述:"})," ",m.description]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["时间戳: ",new Date(m.timestamp).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"3. 事件系统"}),(0,t.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"从Rust后台任务接收实时更新。"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(l.G,{onClick:C,title:v?"监控中...":"开始监控",disabled:v})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"进程状态更新:"}),0===j.length?(0,t.jsx)("p",{className:"text-gray-500",children:'尚无数据，点击"开始监控"接收更新。'}):(0,t.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,t.jsxs)("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["ID: ",e.id]}),(0,t.jsxs)("span",{children:["内存: ",e.memory_usage," MB"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["CPU: ",(100*e.cpu_usage).toFixed(1),"%"]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"4. 硬件信息检测"}),(0,t.jsx)("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:"使用Rust获取系统硬件配置信息。"}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(l.G,{onClick:D,title:k?"加载中...":"获取硬件信息",disabled:k})}),_&&(0,t.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"CPU:"})," ",_.cpu]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"CPU核心数:"})," ",_.cores]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"总内存:"})," ",_.memory_total," MB"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"可用内存:"})," ",_.memory_free," MB"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"操作系统:"})," ",_.operating_system]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"主机名:"})," ",_.hostname]})]})})]})]}),(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"此演示展示了Tauri应用中三种主要的前后端通信方式，以及如何使用Rust获取系统信息。"})})]})}},8671:(e,s,r)=>{Promise.resolve().then(r.bind(r,3158))},9328:(e,s,r)=>{"use strict";r.d(s,{G:()=>t});var a=r(2071);let t=e=>{let{onClick:s,title:r,disabled:t=!1}=e;return(0,a.jsx)("button",{type:"button",onClick:s,disabled:t,className:"m-4 max-w-xs rounded-xl border border-gray-200 p-6 text-left text-inherit transition-colors ".concat(t?"opacity-50 cursor-not-allowed":"hover:border-blue-600 hover:text-blue-600 focus:border-blue-600 focus:text-blue-600 active:border-blue-600 active:text-blue-600 cursor-pointer"," rounded-full border border-solid border-black/[.08] dark:border-white/[.145] transition-colors flex items-center justify-center ").concat(t?"":"hover:bg-[#f2f2f2] dark:hover:bg-[#1a1a1a] hover:border-transparent"," text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 sm:min-w-44"),children:r})}}},e=>{e.O(0,[753,503,358],()=>e(e.s=8671)),_N_E=e.O()}]);